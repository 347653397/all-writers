webpackJsonp([4],{"3utZ":function(e,t,n){"use strict";function a(e){return{comment:e.comment,loading:e.loading,detai:e.detai}}Object.defineProperty(t,"__esModule",{value:!0});var o=(n("LhP3"),n("ItRN")),l=(n("4zAl"),n("Plhq")),r=n("ng98"),c=n.n(r),i=n("6osJ"),s=n.n(i),m=n("iups"),u=n.n(m),p=n("/O8+"),d=n.n(p),h=n("NX1q"),f=n.n(h),v=n("dN2m"),y=n.n(v),g=n("XWAK"),E=(n.n(g),n("KmIg")),b=(n.n(E),n("0xDb")),N=n("yIv6"),C=(n.n(N),n("49Lm")),k=n("s4Lg"),w=function(e){function t(){var e,n,a;c()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return d()(a,(n=a=d()(this,(e=f()(t)).call.apply(e,[this].concat(r))),a.onBuyCourses=function(e){var t=a.props.detai,n=t.commentId,o=t.rewardMoney,r=t.rewardType,c=a.props.dispatch;Number(o)?Number(o)>=.1?c({type:"detai/reward",payload:{course_items_id:"",comment_id:1==r?n:"",type:r,money:o},dispatch:c,playLoading:function(){return c({type:"comment/getCommentReplyList"})}}):l.a.info("\u6253\u8d4f\u91d1\u989d\u4e0d\u5f97\u5c11\u4e8e0.1",1):l.a.info("\u8bf7\u8f93\u5165\u6253\u8d4f\u91d1\u989d",1)},n))}return u()(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"comment/save",payload:{commentId:this.props.match.params.comment_list,commentLoading:!0,commentListPlay:!0}}),this.props.dispatch({type:"comment/getCommentReplyList",payload:{comment_id:this.props.match.params.comment_list}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"comment/save",payload:{commentLength:!0,commentReply:[],oneComment:[],commentTotal:0,commentPageNum:1,commentLike:[],commentReward:[],commentListPlay:!1}})}},{key:"render",value:function(){var e=this.props,t=e.comment,n=(e.location,e.loading),a=this.props.dispatch,l=t.commentLength,r=t.commentReply,c=t.oneComment,i=t.commentId,s=t.commentLoading,m=this.props.detai,u=m.rewardVisible,p=m.rewardMoney,d={actionType:"comment/save",loading:s,listLength:l,onChangeGet:function(){a({type:"comment/getCommentReplyList"})}};return y.a.createElement("div",{className:"userDetai fadeIn animated"},y.a.createElement(C.a,d,y.a.createElement("div",null,y.a.createElement("div",{className:"comment",style:{paddingTop:"0.2rem"}},y.a.createElement("ul",null,y.a.createElement("li",null,y.a.createElement("span",{className:"user"},y.a.createElement("img",{src:c.headimgurl})),y.a.createElement("div",{className:"title"},y.a.createElement("div",{className:"left"}," ",y.a.createElement("span",null,c.nickname),Number(c.money||0)?y.a.createElement("span",{className:"price"},"\uffe5",c.money):null),y.a.createElement("div",{className:"right"}," ",y.a.createElement("span",{onClick:function(){return a({type:"detai/save",payload:{rewardVisible:!0,rewardType:1,commentId:i}})}}),y.a.createElement("span",{onClick:function(){return a({type:"comment/likeComment",payload:{comment_id:i,type:1==c.is_star?2:1}})},className:1==c.is_star?"active":"",style:{color:1==c.is_star?"#E2B979":"#999"}},Number(c.likeTotal)?c.likeTotal>1e4?(c.likeTotal-c.likeTotal%1e3)/1e4+"W":c.likeTotal:""))),y.a.createElement("div",{className:"nr"},c.content),y.a.createElement("div",{className:"date"},Object(b.b)(Number(1e3*c.created_at)||0)),0!=c.length&&0!=c.likeDetail.length?y.a.createElement("div",{className:"userTag",onClick:function(){return a(E.routerRedux.push({pathname:"/comment/like_list/".concat(i)}))}},0!=c.length&&c.likeDetail.map(function(e,t){return y.a.createElement("span",{key:t},y.a.createElement("img",{src:e.headimgurl}))}),y.a.createElement("font",null,c.likeTotal?c.likeTotal+"\u4eba\u8d5e\u8fc7>":"")):y.a.createElement("div",{className:"userTag"},y.a.createElement("p",null,"\u6682\u65e0\u4eba\u70b9\u8d5e")),0!=c.length&&0!=c.rewardDetail.length?y.a.createElement("div",{className:"userTag",onClick:function(){return a(E.routerRedux.push({pathname:"/comment/reward_list/".concat(i)}))}},0!=c.length&&c.rewardDetail.map(function(e,t){return y.a.createElement("span",{key:t},y.a.createElement("img",{src:e.headimgurl}))}),y.a.createElement("font",null,c.rewardTotal?c.rewardTotal+"\u4eba\u6253\u8d4f\u8fc7>":"")):y.a.createElement("div",{className:"userTag"},y.a.createElement("p",null,"\u6682\u65e0\u4eba\u6253\u8d4f")))),y.a.createElement("ul",null,r&&r.map(function(e,t){return y.a.createElement("li",{key:t},y.a.createElement("span",{className:"user"},y.a.createElement("img",{src:e.headimgurl})),y.a.createElement("div",{className:"title"},y.a.createElement("div",{className:"left"}," ",y.a.createElement("span",null,e.nickname),Number(e.money||0)?y.a.createElement("span",{className:"price"},"\uffe5",e.money):null)),y.a.createElement("div",{className:"nr"},e.content),y.a.createElement("div",{className:"date"},e.created_at))}),0!=r.length?y.a.createElement("div",{className:"moreStyle"},l?n.effects["comment/getCommentReplyList"]?"\u6b63\u5728\u52a0\u8f7d":"\u52a0\u8f7d\u66f4\u591a":"\u6ca1\u6709\u66f4\u591a\u8bc4\u8bba\u4e86"):null)))),0!=r.length||n.effects["comment/getCommentReplyList"]?null:y.a.createElement("div",{style:{background:"#fff"}},y.a.createElement("div",{className:"lengthIcon"}),y.a.createElement("p",{className:"lengthIcontext",style:{marginBottom:"0.4rem"}},"\u6682\u65e0\u56de\u590d\u5217\u8868\uff01"),y.a.createElement("br",null)),y.a.createElement(o.a,{visible:u,transparent:!0,style:{width:"8rem"},className:"rewardModal",onClose:function(){return a({type:"detai/save",payload:{rewardMoney:"",rewardVisible:!1}})},title:"\u5bf9\u8be5\u7f51\u53cb\u6253\u8d4f",footer:[{text:"\u53d6\u6d88",onPress:function(){return a({type:"detai/save",payload:{rewardMoney:"",rewardVisible:!1}})}},{text:this.props.loading.effects["detai/reward"]?"\u6b63\u5728\u652f\u4ed8":"\u6253\u8d4f",onPress:this.props.loading.effects["detai/reward"]?null:this.onBuyCourses}]},y.a.createElement("div",{className:"rewardInput"},y.a.createElement("span",{style:{fontSize:"0.7rem",verticalAlign:"middle"}},"\uffe5"),"\xa0",y.a.createElement("input",{type:"text",value:p,onChange:function(e){return a({type:"detai/save",payload:{rewardMoney:Object(b.c)(e.target.value)}})},onInput:function(e){return Object(b.d)(e,6)}}),p?"":y.a.createElement("span",{className:"rewardPlaceholder"},"\u8f93\u5165\u91d1\u989d"))),y.a.createElement("ul",{className:"homeFixed",style:{bottom:"0.4rem"}},y.a.createElement("li",{className:"commentIcon",onClick:function(){return a({type:"detai/save",payload:{commentVisible:!0}})}})),y.a.createElement(k.a,{popup:!0,commentSubmit:function(e,t){a({type:"comment/save",payload:{commentLength:!0,commentPageNum:1}}),a({type:"comment/commentReply",payload:{comment_id:i,content:e},commentUpdate:!0})}}))}}]),s()(t,e),t}(v.Component);t.default=Object(g.connect)(a)(w)},"49Lm":function(e,t,n){"use strict";function a(e){return{comment:e.comment}}var o=(n("ybmL"),n("IyT7")),l=n("ng98"),r=n.n(l),c=n("6osJ"),i=n.n(c),s=n("iups"),m=n.n(s),u=n("/O8+"),p=n.n(u),d=n("NX1q"),h=n.n(d),f=n("+lp1"),v=n.n(f),y=n("dN2m"),g=n.n(y),E=n("XWAK"),b=(n.n(E),n("KmIg")),N=(n.n(b),n("enge")),C=(n.n(N),function(e){function t(e,n){var a;return r()(this,t),a=p()(this,h()(t).call(this,e,n)),a.state={},a.onScrollEnd=a.onScrollEnd.bind(v()(v()(a))),a}return m()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;this.move=window.document.ontouchmove,window.document.ontouchmove=function(e){e.preventDefault()},this.onTouchmove=function(e){e.preventDefault()},document.body.addEventListener("touchmove",this.onTouchmove,{passive:!1}),document.getElementById("moenyList").style.height=document.documentElement.clientHeight+"px";var n={preventDefault:!1,zoom:!1,mouseWheel:!0,probeType:3,bounce:!0,killFlicker:!0};this.iScrollInstance=new IScroll(document.getElementById("moenyList"),n),this.iScrollInstance.on("scrollEnd",this.onScrollEnd),t({type:this.props.actionType,payload:{refreshLoading:function(){return e.iScrollInstance.refresh()}}})}},{key:"onScrollEnd",value:function(){var e=this.props.listLength;this.iScrollInstance.y<=this.iScrollInstance.maxScrollY&&e&&this.props.onChangeGet()}},{key:"componentWillUnmount",value:function(){window.document.ontouchmove=this.move,document.body.removeEventListener("touchmove",this.onTouchmove,{passive:!1}),this.iScrollInstance.destroy()}},{key:"render",value:function(){return g.a.createElement("div",{className:"userDetai"},g.a.createElement(o.a,{toast:!0,text:"\u52a0\u8f7d\u6570\u636e",animating:this.props.loading}),g.a.createElement("div",{id:"moenyList"},this.props.children))}}]),i()(t,e),t}(y.Component));t.a=Object(E.connect)(a)(C)},Bjsw:function(e,t,n){"use strict";function a(){}function o(e){return void 0===e||null===e?"":e}function l(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(w,"_").length}var r=n("34v0"),c=n.n(r),i=n("WxFH"),s=n.n(i),m=n("dbJu"),u=n.n(m),p=n("HFN4"),d=n.n(p),h=n("Lxvp"),f=n.n(h),v=n("i9+B"),y=n.n(v),g=n("lIaQ"),E=n.n(g),b=n("dN2m"),N=n.n(b),C=n("9/Xf"),k=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(n[a[o]]=e[a[o]]);return n},w=/[\uD800-\uDBFF][\uDC00-\uDFFF]|\n/g,T=function(e){function t(e){u()(this,t);var n=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=function(){n.textareaRef.focus()},n.reAlignHeight=function(){var e=n.textareaRef;e.style.height="",e.style.height=e.scrollHeight+"px"},n.onChange=function(e){var t=e.target.value;"value"in n.props?n.setState({value:n.props.value}):n.setState({value:t});var a=n.props.onChange;a&&a(t),n.componentDidUpdate()},n.onBlur=function(e){n.debounceTimeout=setTimeout(function(){document.activeElement!==n.textareaRef&&n.setState({focus:!1})},100);var t=e.currentTarget.value;n.props.onBlur&&n.props.onBlur(t)},n.onFocus=function(e){n.debounceTimeout&&(clearTimeout(n.debounceTimeout),n.debounceTimeout=null),n.setState({focus:!0});var t=e.currentTarget.value;n.props.onFocus&&n.props.onFocus(t)},n.onErrorClick=function(){n.props.onErrorClick&&n.props.onErrorClick()},n.clearInput=function(){n.setState({value:""}),n.props.onChange&&n.props.onChange("")},n.state={focus:!1,value:e.value||e.defaultValue||""},n}return y()(t,e),d()(t,[{key:"componentWillReceiveProps",value:function(e){"value"in e&&this.setState({value:o(e.value)})}},{key:"componentDidMount",value:function(){this.props.autoHeight&&this.reAlignHeight()}},{key:"componentDidUpdate",value:function(){this.props.autoHeight&&this.state.focus&&this.reAlignHeight()}},{key:"componentWillUnmount",value:function(){this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null)}},{key:"render",value:function(){var e,t,n=this,a=this.props,o=a.prefixCls,r=a.prefixListCls,i=a.editable,m=a.style,u=a.clear,p=(a.children,a.error),d=a.className,h=a.count,f=a.labelNumber,v=a.title,y=(a.onErrorClick,a.autoHeight),g=(a.defaultValue,k(a,["prefixCls","prefixListCls","editable","style","clear","children","error","className","count","labelNumber","title","onErrorClick","autoHeight","defaultValue"])),b=g.disabled,w=this.state,T=w.value,x=w.focus,I=h>0&&this.props.rows>1,L=E()(d,r+"-item",o+"-item",(e={},s()(e,o+"-disabled",b),s()(e,o+"-item-single-line",1===this.props.rows&&!y),s()(e,o+"-error",p),s()(e,o+"-focus",x),s()(e,o+"-has-count",I),e)),S=E()(o+"-label",(t={},s()(t,o+"-label-2",2===f),s()(t,o+"-label-3",3===f),s()(t,o+"-label-4",4===f),s()(t,o+"-label-5",5===f),s()(t,o+"-label-6",6===f),s()(t,o+"-label-7",7===f),t)),_=l(T),P={};return h>0&&(P.maxLength=h-_+(T?T.length:0)),N.a.createElement("div",{className:L},v&&N.a.createElement("div",{className:S},v),N.a.createElement("div",{className:o+"-control"},N.a.createElement("textarea",c()({ref:function(e){return n.textareaRef=e}},P,g,{value:T,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,readOnly:!i,style:m}))),u&&i&&T&&_>0&&N.a.createElement(C.a,{activeClassName:o+"-clear-active"},N.a.createElement("div",{className:o+"-clear",onClick:this.clearInput})),p&&N.a.createElement("div",{className:o+"-error-extra",onClick:this.onErrorClick}),I&&N.a.createElement("span",{className:o+"-count"},N.a.createElement("span",null,T?_:0),"/",h))}}]),t}(N.a.Component);t.a=T,T.defaultProps={prefixCls:"am-textarea",prefixListCls:"am-list",autoHeight:!1,editable:!0,disabled:!1,placeholder:"",clear:!1,rows:1,onChange:a,onBlur:a,onFocus:a,onErrorClick:a,error:!1,labelNumber:5}},JK6K:function(e,t,n){"use strict";var a=(n("99xQ"),n("SuD+"));n.n(a)},K6jM:function(e,t){},SFyZ:function(e,t,n){"use strict";var a=(n("99xQ"),n("JK6K"),n("ej5M"));n.n(a)},"SuD+":function(e,t){},ej5M:function(e,t){},enge:function(e,t){},s4Lg:function(e,t,n){"use strict";function a(e){return{detai:e.detai,loading:e.loading}}var o=(n("LhP3"),n("ItRN")),l=(n("4zAl"),n("Plhq")),r=n("dN2m"),c=n.n(r),i=n("XWAK"),s=(n.n(i),n("wrPi")),m=function(e){var t=e.dispatch,n=e.detai,a=e.popup,r=e.loading,i=e.commentSubmit,m=n.commentVisible,u=n.contentItems,p=(n.contentItemShow,n.commentText);return c.a.createElement(o.a,{popup:a,visible:m,onClose:function(){return t({type:"detai/save",payload:{commentVisible:!1}})},animationType:"slide-up",className:"commentModal"},c.a.createElement(s.a,{commentText:p,contentItems:u,loading:r.effects["detai/comment"],onPropsVal:function(e,n){"commentText"==e?t({type:"detai/save",payload:{commentText:n}}):(u[e].value=n,t({type:"detai/save",payload:{contentItems:u}}))},onClose:function(){return t({type:"detai/save",payload:{commentVisible:!1}})},commentSubmit:function(){if(p){var e=[];u.map(function(t,n){e[n]=t.value}),i(p,e)}else l.a.info("\u8bf7\u5148\u8f93\u5165\u5185\u5bb9\u5662\uff01",1)}}))};t.a=Object(i.connect)(a)(m)},wrPi:function(e,t,n){"use strict";var a=(n("SFyZ"),n("Bjsw")),o=n("dN2m"),l=n.n(o),r=n("K6jM"),c=(n.n(r),function(e){var t=e.commentText,n=e.loading,o=e.onClose,r=e.onPropsVal,c=e.commentSubmit;e.contentItems;return l.a.createElement("div",{className:"commentBox"},l.a.createElement("h3",null,"\u8bc4\u8bba\u4e00\u4e0b",l.a.createElement("span",{style:{fontSize:"0.4rem"},onClick:o},"\u53d6\u6d88")),l.a.createElement(a.a,{className:"commentText",rows:5,count:100,placeholder:"\u5206\u4eab\u5fc3\u5f97\u4f53\u4f1a...",onChange:function(e){return r("commentText",e)},value:t}),l.a.createElement("div",{className:"commentSubmit",onClick:n?null:c},n?"\u6b63\u5728\u63d0\u4ea4":"\u63d0\u4ea4"))});t.a=c},yIv6:function(e,t){}});